/* custom.css - Updated with New Navigation */

/* --- Global & Theme Variables --- */
:root {
    --primary-indigo: #4338CA;
    --primary-indigo-darker: #3730A3;
    --primary-indigo-overlay: rgba(49, 46, 129, 0.85); 
    --primary-indigo-semitransparent: rgba(67, 56, 202, 0.1); 

    --text-color: #2c3e50; 
    --text-color-light: #7f8c8d;   
    --text-on-primary: #ffffff; 
    --link-on-primary: #d1d5db; 
    --link-on-primary-hover: #ffffff; 
    
    --text-on-indigo: var(--text-on-primary); 
    --text-on-indigo-dim: #e0e0e0; 
    --link-on-indigo: var(--link-on-primary); 
    --link-on-indigo-hover: var(--link-on-primary-hover); 

    --background-color: #ffffff;
    --background-color-light: #f9f9f9;
    --border-color: #e5e7eb; 
    --border-color-light: #f3f4f6; 

    --navbar-item-border-radius: 9999px; 
    --button-border-radius: 4px;      
    --box-content-border-radius: 12px; 
    --card-border-radius: 8px;

    --card-shadow: 0 4px 6px -1px rgba(0,0,0,0.07), 0 2px 4px -1px rgba(0,0,0,0.04); 
    --card-shadow-hover: 0 10px 15px -3px rgba(0,0,0,0.07), 0 4px 6px -2px rgba(0,0,0,0.05);

    --font-family-main: 'Lexend', sans-serif;
}

.dark-theme {
    --background-color: #121212;
    --background-color-light: #1e1e1e;
    --text-color: #e0e0e0;
    --text-color-light: #9e9e9e;
    --border-color: #333333;
    --border-color-light: #444444;
    --primary-indigo-semitransparent: rgba(67, 56, 202, 0.2);
}

.dark-theme .navbar.main-navbar {
    background-color: var(--background-color);
}
.dark-theme .bulma-logo-img {
    filter: brightness(0) invert(1) !important;
}
.dark-theme .section.is-primary {
    background-color: #362f8e !important;
}

/* --- Theme Dropdown (Desktop) --- */
.theme-dropdown { /* Wrapper for button and content */
    position: relative;
    display: inline-block; /* Or flex if needed by parent .navbar-item */
}
.theme-dropdown-content { /* The actual dropdown box */
    display: none;
    position: absolute;
    right: 0;
    min-width: 180px;
    background-color: var(--background-color);
    border-radius: 6px;
    box-shadow: 0 0.5em 1em -0.125em rgba(10, 10, 10, 0.1), 0 0 0 1px rgba(10, 10, 10, 0.02);
    z-index: 40; /* Ensure it's above other navbar items */
    padding: 0.5rem 0;
    border: 1px solid var(--border-color-light);
}
.theme-dropdown.is-active .theme-dropdown-content {
    display: block;
}
.theme-item {
    display: flex;
    align-items: center;
    padding: 0.75rem 1rem;
    color: var(--text-color);
    cursor: pointer;
    transition: background-color 0.2s ease;
}
.theme-item:hover {
    background-color: var(--background-color-light);
}
.theme-item.is-active {
    background-color: var(--primary-indigo-semitransparent);
    font-weight: 600;
}
.theme-icon { margin-right: 0.75rem; width: 1.5rem; text-align: center; }
.theme-icon.sun { color: #F6C32C; }
.theme-icon.moon { color: #A78BFA; }
.theme-icon.desktop { color: #4ADE80; }


/* --- Theme Toggles Visibility Control --- */

/* Mobile View Specifics (max-width: 1023px) */
@media screen and (max-width: 1023px) {
    /* Ensure mobile toggle div is visible and positioned */
    .theme-toggle-mobile {
        display: flex !important; /* Show the wrapper for mobile button */
        align-items: center;
        margin-left: auto; /* Pushes it to the right, before the burger if burger also has margin-left:auto */
        order: 1; /* Try to force it before burger if burger has order 2 or higher */
    }
    /* Ensure the mobile button itself is visible */
    #theme-toggle-mobile {
        display: inline-flex !important; /* Show the mobile button */
        padding: 0.5rem;
        height: 2.25rem; 
        width: 2.25rem;  
        background: transparent;
        border: none;
        color: var(--primary-indigo);
        align-items: center;
        justify-content: center;
        border-radius: 4px;
    }
    #theme-toggle-mobile:hover {
        background-color: var(--primary-indigo-semitransparent);
    }

    /* Ensure desktop theme dropdown (and its wrapper navbar-item) is HIDDEN on mobile */
    .theme-dropdown-navbar-item {
        display: none !important;
    }

    /* Styles for CV and Email Me buttons in mobile dropdown */
    #mainNavbarMobile .navbar-end > .navbar-item {
        padding: 0.35rem 1rem;
        display: flex;
        justify-content: flex-end;
    }
    #mainNavbarMobile .navbar-end > .navbar-item > .button.is-indigo {
        flex-grow: 0;
        flex-shrink: 1;
        width: auto;
        min-width: 100px;
        max-width: 160px;
        text-align: center;
    }
    /* Ensure mobile menu background is themed */
    .navbar-menu.is-active {
        background-color: var(--background-color);
        box-shadow: 0 8px 16px rgba(10,10,10,.1);
        padding: 0.5rem 0;
    }
}

/* Desktop View Specifics (min-width: 1024px) */
@media screen and (min-width: 1024px) {
    /* Ensure mobile toggle (div and button) is HIDDEN on desktop */
    .theme-toggle-mobile,
    #theme-toggle-mobile {
        display: none !important;
    }

    /* Ensure desktop theme dropdown wrapper is VISIBLE on desktop */
    .theme-dropdown-navbar-item {
        display: flex !important; /* Bulma navbar-items are often flex */
        align-items: center;
    }
}


/* --- Bulma .is-primary Color Override --- */
.section.is-primary { 
    background-color: var(--primary-indigo) !important;
    color: var(--text-on-primary) !important;
}
.section.is-primary .title, 
.section.is-primary .subtitle, 
.section.is-primary p,
.section.is-primary .content,
.section.is-primary .content p {
    color: var(--text-on-primary) !important;
}
.section.is-primary .subtitle { 
    color: var(--link-on-primary) !important; 
}
.button.is-primary { 
    background-color: var(--primary-indigo) !important;
    border-color: var(--primary-indigo) !important;
    color: var(--text-on-primary) !important;
}
.button.is-primary:hover {
    background-color: var(--primary-indigo-darker) !important;
    border-color: var(--primary-indigo-darker) !important;
}
.button.is-primary:focus:not(:active) {
    box-shadow: 0 0 0 0.125em rgba(67, 56, 202, 0.25);
}

html { scroll-behavior: smooth; background-color: var(--background-color); }
body { 
    font-family: var(--font-family-main);
    color: var(--text-color);
    line-height: 1.7;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    background-color: var(--background-color);
    padding-top: 3.25rem; 
}

.section { padding: 3rem 1.5rem; } 
@media screen and (min-width: 769px) { 
    .section { padding: 4rem 1.5rem; }
}

h1, h2, h3, h4, h5, h6, .title, .subtitle { font-family: var(--font-family-main); color: var(--text-color); }
.title { font-weight: 600; } 
.subtitle { color: var(--text-color-light); font-weight: 400; }

a { 
    color: var(--primary-indigo);
    transition: color 0.2s ease-in-out, background-color 0.2s ease-in-out, border-color 0.2s ease-in-out;
    font-weight: 500;
}
a:hover { color: var(--primary-indigo-darker); }

.button {
    border-radius: var(--button-border-radius) !important;
    font-weight: 600;
    font-family: var(--font-family-main);
    transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out, color 0.2s ease-in-out, transform 0.1s ease-out, box-shadow 0.2s ease-out;
    border-width: 1px; 
    border-style: solid; 
}
.button:active { transform: translateY(1px); }
.button.is-default-outlined {
    background-color: transparent;
    border-color: var(--border-color);
    color: var(--text-color-light);
    border-width: 1px;
}
.button.is-default-outlined:hover {
    border-color: var(--primary-indigo);
    color: var(--primary-indigo);
    background-color: var(--background-color);
}

/* --- Navbar Styling --- */
.navbar.main-navbar { 
    background-color: var(--background-color); 
    border-bottom: 1px solid var(--border-color-light); 
    font-family: var(--font-family-main);
    transition: box-shadow 0.3s ease-in-out; 
    position: fixed; 
    width: 100%;
    top: 0;
    left: 0;
    z-index: 30;
    min-height: 3.25rem; 
}
.navbar.main-navbar.has-shadow { 
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.navbar-brand {
    align-items: stretch; /* Ensure items in navbar-brand can stretch vertically */
}
.navbar-brand .navbar-item.brand-name {
    color: var(--primary-indigo);
    font-weight: 700;
    font-size: 1.25rem;
    padding: 0.5rem 1rem;
    border-radius: 0 !important;
    background-color: transparent;
    border: none;
    display: flex;
    align-items: center;
}
.navbar-brand .logo-icon {
    background-color: var(--primary-indigo);
    color: white;
    width: 32px;
    height: 32px;
    border-radius: 4px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    margin-right: 0.75rem;
    font-size: 16px; 
}
.navbar-brand .logo-icon i { font-size: 16px; }
.navbar-brand .navbar-item.brand-name:hover {
    background-color: var(--primary-indigo-semitransparent) !important;
    color: var(--primary-indigo) !important;
    border: none !important;
}

/* Bulma's navbar-burger default style pushes it to the right on mobile */
/* No need to style .navbar-burger span explicitly here if Bulma defaults are fine */
/* .navbar-burger span { background-color: var(--primary-indigo); height: 2px; } */


/* Desktop Menu items */
@media screen and (min-width: 1024px) {
    .navbar-menu .navbar-item { 
        color: var(--text-color);
        border: none; 
        background-color: transparent;
        font-weight: 500;
        border-radius: 4px !important; 
        margin: 0 0.3rem;
        padding: 0.5rem 0.75rem; 
        display: flex; 
        align-items: center;
    }
    .navbar-menu .navbar-item:hover,
    .navbar-menu .navbar-item.is-active {
        background-color: var(--primary-indigo-semitransparent) !important;
        color: var(--primary-indigo) !important;
        border: none !important; 
    }
    .button.is-indigo {
        background-color: var(--primary-indigo);
        color: white;
        border: none;
        border-radius: 4px;
        font-weight: 700;
    }
    .button.is-indigo:hover {
        background-color: var(--primary-indigo-darker);
    }
}

/* --- Section 1: White Intro Hero --- */
.white-intro-hero {
    background-color: var(--background-color);
    padding-top: 5rem;      
    padding-bottom: 3rem;  
    text-align: center;     
}
.hero-main-title { 
    font-size: 2.4rem;   
    font-weight: 700;   
    color: var(--text-color) !important; 
    margin-bottom: 0.5rem !important; 
}
.hero-tagline { 
    font-size: 1.1rem; 
    color: var(--primary-indigo) !important; 
    margin-bottom: 2rem !important; 
    max-width: 550px; 
    margin-left: auto;
    margin-right: auto;
    font-weight: 400; 
}
.white-hero-profile-image-wrapper {
    display: flex;           
    justify-content: center; 
    margin-top: 1rem;        
    margin-bottom: 1.5rem;   
}
img.hero-profile-image-main { 
    width: 256px; height: 256px; border-radius: 50%; object-fit: cover;   
    border: 5px solid var(--background-color); box-shadow: 0 8px 25px rgba(0,0,0,0.12); display: block;      
}
@media screen and (max-width: 768px) { 
    .hero-main-title { font-size: 2rem; }
    .hero-tagline { font-size: 1rem; margin-bottom: 1.5rem; }
    img.hero-profile-image-main { width: 180px; height: 180px; }
}

/* --- Section 2: Indigo Personal Description Hero --- */
.section.indigo-description-hero.is-primary { padding-top: 4rem; padding-bottom: 4rem; }
.indigo-description-hero .hero-body { padding: 2rem 0; } 
.indigo-description-hero .title.is-2 { margin-bottom: 2rem; font-weight: 600; }
.indigo-description-hero .content p { line-height: 1.8; margin-bottom: 1.25rem; }
.indigo-description-hero a.link-on-indigo-bg { 
    color: var(--link-on-primary); font-weight: 600; text-decoration: none;
    border-bottom: 1px solid var(--link-on-primary); padding-bottom: 1px;
    transition: color 0.2s ease, border-bottom-color 0.2s ease;
}
.indigo-description-hero a.link-on-indigo-bg:hover {
    color: var(--link-on-primary-hover); border-bottom-color: var(--link-on-primary-hover);
}

/* --- Section 3: Recent Publications --- */
.recent-publications-section { background-color: var(--background-color); padding-top: 4rem; padding-bottom: 4rem; }
.recent-publications-section .section-title { color: var(--text-color); margin-bottom: 3rem; }
.publication-card.portrait { 
    display: block; position: relative; border-radius: var(--card-border-radius); overflow: hidden;
    box-shadow: var(--card-shadow); transition: transform 0.3s ease-out, box-shadow 0.3s ease-out;
    background-color: #e0e0e0; 
}
.publication-card.portrait:hover { transform: translateY(-6px) scale(1.02); box-shadow: var(--card-shadow-hover); }
.publication-image-figure { position: relative; padding-top: 129.4%; background-color: #f0f0f0; }
.publication-image-figure img {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; 
    display: block; transition: transform 0.5s ease;
}
.publication-card.portrait:hover img { transform: scale(1.05); }
.publication-overlay {
    position: absolute; bottom: 0; left: 0; right: 0; background: var(--primary-indigo-overlay);
    color: var(--text-on-primary); padding: 1rem 1.25rem; opacity: 0; 
    transform: translateY(100%); transition: opacity 0.3s ease-out, transform 0.3s ease-out; 
    text-align: left; min-height: auto; display: flex; flex-direction: column; justify-content: flex-end; 
}
.publication-card.portrait:hover .publication-overlay { opacity: 1; transform: translateY(0); }
.publication-overlay .title.is-5 {
    color: var(--text-on-primary) !important; margin-bottom: 0; font-size: 0.9rem; 
    line-height: 1.25; font-weight: 500;
}

.hero-social-links { margin-top: 2rem; }
.hero-social-links .button.is-ghost {
    background: transparent; border: none; color: var(--text-color-light);
    font-size: 1.5rem; margin: 0 0.6rem; padding: 0.5rem;
}
.hero-social-links .button.is-ghost:hover { color: var(--primary-indigo); transform: scale(1.1); }
.hero-social-links .button.is-ghost .icon { font-size: inherit; }

/* --- Generic Box Styling (CV, Contact content) --- */
.box.content-box {
    background-color: var(--background-color); border: 1px solid var(--border-color);
    border-radius: var(--box-content-border-radius); box-shadow: var(--card-shadow);
    padding: 0; font-family: var(--font-family-main); overflow: hidden; 
}
.cv-section-default { padding: 2rem; }
@media screen and (min-width: 769px) { .cv-section-default { padding: 2.5rem; } }
.cv-section-colored {
    background-color: var(--primary-indigo); color: var(--text-on-indigo); 
    padding: 2rem; border-radius: 0;
}
@media screen and (min-width: 769px) { .cv-section-colored { padding: 2.5rem; } }
.box.content-box > div:first-child { border-top-left-radius: var(--box-content-border-radius); border-top-right-radius: var(--box-content-border-radius); }
.box.content-box > div:last-child { border-bottom-left-radius: var(--box-content-border-radius); border-bottom-right-radius: var(--box-content-border-radius); }
.cv-section-colored .title, .cv-section-colored .subtitle, .cv-section-colored strong { color: var(--text-on-indigo) !important; }
.cv-section-colored .subtitle { color: var(--text-on-indigo-dim) !important; }
.cv-section-colored address, .cv-section-colored p, .cv-section-colored li { color: var(--text-on-indigo); }
.cv-section-colored a { color: var(--link-on-indigo); font-weight: 600; }
.cv-section-colored a:hover { color: var(--link-on-indigo-hover); text-decoration: underline; }
.cv-section-colored abbr { border-bottom-color: var(--text-on-indigo-dim); color: var(--text-on-indigo); }
.section-title-indigo { color: var(--primary-indigo) !important; }
.content-box .title.is-4 { padding-bottom: 0.5em; margin-top: 1.5rem; margin-bottom: 1em; font-size: 1.5rem; }
.content-box .cv-section-default .title.is-4 { border-bottom: 1px solid var(--border-color-light); }
.content-box div:first-child > .title.is-4:first-of-type { margin-top: 0; }
.content-box hr { background-color: var(--border-color-light); height: 1px; margin: 1.5rem 0; }
.cv-section-colored hr { background-color: rgba(255, 255, 255, 0.2); }

/* --- Footer --- */
.footer {
    background-color: var(--background-color); 
    border-top: none; color: var(--text-color-light); padding: 2rem 1.5rem; 
    margin-top: auto; font-family: var(--font-family-main); text-align: center;
}
.footer:not(.is-primary) .content p { 
    color: var(--text-color-light); font-size: 0.85rem; line-height: 1.5; margin-bottom: 0.5rem; 
}
.footer.is-primary .content p, .footer.is-primary p { 
    color: var(--text-on-primary) !important; font-size: 0.9rem; line-height: 1.6; margin-bottom: 0; 
}
.footer a { color: var(--primary-indigo); font-weight: 500; }
.footer.is-primary a { color: var(--link-on-primary) !important; }
.footer a:hover { color: var(--primary-indigo-darker); }
.footer.is-primary a:hover { color: var(--link-on-primary-hover) !important; text-decoration: underline; }
.bulma-credit { display: inline-flex; align-items: center; font-weight: normal !important; }
.bulma-credit:hover { text-decoration: none !important; }
.bulma-credit:hover .bulma-logo-img { filter: none; }
.dark-theme .footer.is-primary .bulma-logo-img,
.footer.is-primary .bulma-logo-img { filter: brightness(0) invert(1) !important; }
.bulma-logo-img {
    height: 1em; margin-left: 0.3em; vertical-align: middle; position: relative;
    top: -0.05em; filter: grayscale(100%) opacity(0.7); transition: filter 0.2s ease-in-out;
}
.footer-social-links a { margin: 0 0.5em; color: var(--link-on-primary) !important; }
.footer-social-links a:hover { color: var(--link-on-primary-hover) !important; }

/* Mobile Menu Helper Styles */
body.is-menu-open {
    overflow: hidden; /* Prevents scrolling of body when mobile menu is open */
}
