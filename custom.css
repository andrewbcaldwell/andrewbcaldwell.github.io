/* custom.css - Updated with New Navigation */

/* --- Global & Theme Variables --- */
:root {
    --primary-indigo: #4338CA;
    --primary-indigo-darker: #3730A3;
    --primary-indigo-overlay: rgba(49, 46, 129, 0.85); 
    --primary-indigo-semitransparent: rgba(67, 56, 202, 0.1); 

    --text-color: #2c3e50; 
    --text-color-light: #7f8c8d;   
    --text-on-primary: #ffffff; /* For general text on indigo backgrounds */    
    --link-on-primary: #d1d5db; /* For general links on indigo backgrounds */    
    --link-on-primary-hover: #ffffff; 
    
    /* CV Page Specific (can be same as above if no difference needed) */
    --text-on-indigo: var(--text-on-primary); 
    --text-on-indigo-dim: #e0e0e0; /* Slightly dimmer for less emphasis */
    --link-on-indigo: var(--link-on-primary); 
    --link-on-indigo-hover: var(--link-on-primary-hover); 

    --background-color: #ffffff;
    --background-color-light: #f9f9f9;
    --border-color: #e5e7eb; 
    --border-color-light: #f3f4f6; 

    --navbar-item-border-radius: 9999px; 
    --button-border-radius: 4px;      
    --box-content-border-radius: 12px; 
    --card-border-radius: 8px;

    --card-shadow: 0 4px 6px -1px rgba(0,0,0,0.07), 0 2px 4px -1px rgba(0,0,0,0.04); 
    --card-shadow-hover: 0 10px 15px -3px rgba(0,0,0,0.07), 0 4px 6px -2px rgba(0,0,0,0.05);

    --font-family-main: 'Lexend', sans-serif;
}

/* Dark theme class */
.dark-theme {
    --background-color: #121212;
    --background-color-light: #1e1e1e;
    --text-color: #e0e0e0;
    --text-color-light: #9e9e9e;
    --border-color: #333333;
    --border-color-light: #444444;
    
    /* Keep the primary indigo color the same */
    /* Perhaps lighten the semitransparent version for better visibility */
    --primary-indigo-semitransparent: rgba(67, 56, 202, 0.2);
}

/* Extra styles specific to dark mode */
.dark-theme .navbar.main-navbar {
    background-color: var(--background-color);
}

.dark-theme .bulma-logo-img {
    filter: brightness(0) invert(1) !important; /* Make Bulma logo visible in dark mode */
}

.dark-theme .section.is-primary {
    /* Slightly adjust the primary section in dark mode to not be too harsh */
    background-color: #362f8e !important;
}

/* Theme Dropdown Styles (Primarily for Desktop, but .theme-item is shared) */
.theme-dropdown { /* This is the #desktop-theme-dropdown-container */
    position: relative;
    display: inline-block; /* The button inside makes it an inline block */
}

.theme-dropdown-content { /* This is #desktop-theme-options-dropdown */
    display: none;
    position: absolute;
    right: 0;
    min-width: 180px;
    background-color: var(--background-color);
    border-radius: 6px;
    box-shadow: 0 0.5em 1em -0.125em rgba(10, 10, 10, 0.1), 0 0 0 1px rgba(10, 10, 10, 0.02);
    z-index: 40;
    padding: 0.5rem 0;
    border: 1px solid var(--border-color-light);
}

.theme-dropdown.is-active .theme-dropdown-content {
    display: block;
}

/* Shared .theme-item styles for both mobile and desktop dropdowns */
.theme-item {
    display: flex;
    align-items: center;
    padding: 0.75rem 1rem;
    color: var(--text-color);
    cursor: pointer;
    transition: background-color 0.2s ease;
}

.theme-item:hover {
    background-color: var(--background-color-light);
}

.theme-item.is-active {
    background-color: var(--primary-indigo-semitransparent);
    font-weight: 600;
}

.theme-icon {
    margin-right: 0.75rem;
    width: 1.5rem;
    text-align: center;
}

.theme-icon.sun { color: #F6C32C; }
.theme-icon.moon { color: #A78BFA; }
.theme-icon.desktop { color: #4ADE80; }

/* REMOVED Old mobile toggle styles (.theme-toggle-mobile, #theme-toggle-mobile) */

/* --- NEW Mobile Theme Dropdown (in navbar-brand) --- */
.mobile-theme-toggler { /* This is the .navbar-item.has-dropdown in navbar-brand, with ID #mobile-theme-dropdown-container */
    padding: 0; 
    margin-left: auto; 
    /* margin-right: 0.25rem; */ /* Optional spacing */
}

.mobile-theme-trigger { /* This is the <a> link trigger, with ID #mobile-theme-trigger */
    padding: 0.5rem 0.75rem; 
    display: flex;
    align-items: center;
    height: 100%; 
    color: var(--primary-indigo); 
    cursor: pointer;
}
.mobile-theme-trigger:hover,
.mobile-theme-toggler.is-active .mobile-theme-trigger {
    background-color: var(--primary-indigo-semitransparent);
    border-radius: var(--button-border-radius);
}

.mobile-theme-toggler .navbar-dropdown { /* This is #mobile-theme-options-dropdown */
    top: calc(100% + 2px); 
    right: 0; 
    left: auto; 
    min-width: 160px; 
    max-width: 180px;
    border-radius: 6px;
    box-shadow: 0 8px 16px rgba(10,10,10,.1), 0 0 0 1px rgba(10,10,10,.02);
    background-color: var(--background-color);
    border: 1px solid var(--border-color-light);
    padding: 0.5rem 0; 
    z-index: 35; 
    /* display: none; is default for .navbar-dropdown, parent .is-active shows it */
}


/* Hide/Show toggles based on screen size */
@media screen and (max-width: 1023px) { /* Mobile Styles */
    /* Show NEW mobile theme dropdown in navbar-brand */
    .mobile-theme-toggler { /* ID: #mobile-theme-dropdown-container */
        display: flex !important; 
    }

    /* Hide Desktop theme dropdown (which is inside .navbar-menu) */
    .theme-dropdown-navbar-item { /* Wrapper for #desktop-theme-dropdown-container */
        display: none !important;
    }

    /* Styles for CV and Email Me buttons in mobile main dropdown */
    #mainNavbarMobile .navbar-end > .navbar-item {
        padding: 0.35rem 1rem;
        display: flex;
        justify-content: flex-end;
    }
    #mainNavbarMobile .navbar-end > .navbar-item > .button.is-indigo {
        flex-grow: 0;
        flex-shrink: 1;
        width: auto;
        min-width: 100px;
        max-width: 160px;
        text-align: center;
    }
    .navbar-menu.is-active { /* Background for the main mobile dropdown */
        background-color: var(--background-color);
        box-shadow: 0 8px 16px rgba(10,10,10,.1);
        padding: 0.5rem 0;
    }
}

@media screen and (min-width: 1024px) { /* Desktop Styles */
    /* Hide NEW mobile theme dropdown from navbar-brand */
    .mobile-theme-toggler { /* ID: #mobile-theme-dropdown-container */
        display: none !important;
    }

    /* Show Desktop theme dropdown (which is inside .navbar-menu) */
    .theme-dropdown-navbar-item { /* Wrapper for #desktop-theme-dropdown-container */
        display: flex !important; 
        align-items: center; 
    }
    
    /* --- Your existing desktop styles for navbar-menu items --- */
    .navbar-menu .navbar-item { 
        color: var(--text-color);
        border: none; 
        background-color: transparent;
        font-weight: 500;
        border-radius: 4px !important; 
        margin: 0 0.3rem;
        padding: 0.5rem 0.75rem; 
        display: flex; 
        align-items: center;
    }
    .navbar-menu .navbar-item:hover,
    .navbar-menu .navbar-item.is-active { /* This .is-active might be for active page links, not theme button */
        background-color: var(--primary-indigo-semitransparent) !important;
        color: var(--primary-indigo) !important;
        border: none !important; 
    }
    #desktop-theme-trigger { /* Style the desktop trigger button specifically if needed */
        /* display: inline-flex; */ /* Bulma button default */
        /* align-items: center; */
        /* justify-content: center; */
        /* padding: calc(0.5em - 1px) 1em; */ /* Bulma button default */
    }
    #desktop-theme-trigger .icon { /* Icon color for desktop trigger */
         color: var(--primary-indigo);
    }

    .button.is-indigo {
        background-color: var(--primary-indigo);
        color: white;
        border: none;
        border-radius: 4px;
        font-weight: 700;
    }
    .button.is-indigo:hover {
        background-color: var(--primary-indigo-darker);
    }
    /* --- End of your existing desktop styles --- */
}

/* --- Bulma .is-primary Color Override --- */
.section.is-primary { 
    background-color: var(--primary-indigo) !important;
    color: var(--text-on-primary) !important;
}
.section.is-primary .title, 
.section.is-primary .subtitle, 
.section.is-primary p,
.section.is-primary .content, /* Ensure content within .is-primary sections is light */
.section.is-primary .content p { /* And paragraphs within that content */
    color: var(--text-on-primary) !important;
}
.section.is-primary .subtitle { 
    color: var(--link-on-primary) !important; 
}
/* Button specific .is-primary */
.button.is-primary { 
    background-color: var(--primary-indigo) !important;
    border-color: var(--primary-indigo) !important;
    color: var(--text-on-primary) !important;
}
.button.is-primary:hover {
    background-color: var(--primary-indigo-darker) !important;
    border-color: var(--primary-indigo-darker) !important;
}
.button.is-primary:focus:not(:active) {
    box-shadow: 0 0 0 0.125em rgba(67, 56, 202, 0.25);
}

html { scroll-behavior: smooth; background-color: var(--background-color); }
body { 
    font-family: var(--font-family-main);
    color: var(--text-color);
    line-height: 1.7;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    background-color: var(--background-color);
    padding-top: 3.25rem; /* For fixed navbar - Adjust if navbar height changes significantly */
}

.section { padding: 3rem 1.5rem; } 
@media screen and (min-width: 769px) { 
    .section { padding: 4rem 1.5rem; }
}

h1, h2, h3, h4, h5, h6, .title, .subtitle { font-family: var(--font-family-main); color: var(--text-color); }
.title { font-weight: 600; } 
.subtitle { color: var(--text-color-light); font-weight: 400; }

a { 
    color: var(--primary-indigo);
    transition: color 0.2s ease-in-out, background-color 0.2s ease-in-out, border-color 0.2s ease-in-out;
    font-weight: 500;
}
a:hover { color: var(--primary-indigo-darker); }

.button {
    border-radius: var(--button-border-radius) !important;
    font-weight: 600;
    font-family: var(--font-family-main);
    transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out, color 0.2s ease-in-out, transform 0.1s ease-out, box-shadow 0.2s ease-out;
    border-width: 1px; 
    border-style: solid; 
}
.button:active { transform: translateY(1px); }
.button.is-default-outlined {
    background-color: transparent;
    border-color: var(--border-color);
    color: var(--text-color-light);
    border-width: 1px;
}
.button.is-default-outlined:hover {
    border-color: var(--primary-indigo);
    color: var(--primary-indigo);
    background-color: var(--background-color);
}

/* --- Navbar Styling --- */
.navbar.main-navbar { 
    background-color: var(--background-color); 
    border-bottom: 1px solid var(--border-color-light); 
    font-family: var(--font-family-main);
    transition: box-shadow 0.3s ease-in-out; 
    /* padding: 0.2rem 0; REMOVED - let min-height control */
    position: fixed; 
    width: 100%;
    top: 0;
    left: 0;
    z-index: 30;
    min-height: 3.25rem; /* Bulma default */
}
.navbar.main-navbar.has-shadow { 
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

/* Logo styling */
.navbar-brand {
    align-items: stretch; /* Ensures items like .navbar-item can fill height for proper alignment */
}
.navbar-brand .navbar-item.brand-name {
    color: var(--primary-indigo);
    font-weight: 700;
    font-size: 1.25rem;
    padding: 0.5rem 1rem;
    border-radius: 0 !important;
    background-color: transparent;
    border: none;
    display: flex;
    align-items: center;
}

.navbar-brand .logo-icon {
    background-color: var(--primary-indigo);
    color: white;
    width: 32px;
    height: 32px;
    border-radius: 4px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    margin-right: 0.75rem;
    font-size: 16px; /* Smaller than text to fit properly */
}

.navbar-brand .logo-icon i {
    font-size: 16px;
}

.navbar-brand .navbar-item.brand-name:hover {
    background-color: var(--primary-indigo-semitransparent) !important;
    color: var(--primary-indigo) !important;
    border: none !important;
}

.navbar-burger { /* Ensure burger is styled for visibility */
    color: var(--primary-indigo); 
}
/* .navbar-burger span default color is based on parent text color or explicit set by bulma */


/* Mobile Menu Overlay (NEW) section from original CSS is now REMOVED */
/* Standard Bulma mobile menu is .navbar-menu.is-active */


/* --- Section 1: White Intro Hero --- */
.white-intro-hero {
    background-color: var(--background-color);
    padding-top: 5rem;      
    padding-bottom: 3rem;  
    text-align: center;     
}
.hero-main-title { 
    font-size: 2.4rem;   
    font-weight: 700;   
    color: var(--text-color) !important; 
    margin-bottom: 0.5rem !important; 
}
.hero-tagline { 
    font-size: 1.1rem; 
    color: var(--primary-indigo) !important; 
    margin-bottom: 2rem !important; 
    max-width: 550px; 
    margin-left: auto;
    margin-right: auto;
    font-weight: 400; 
}
.white-hero-profile-image-wrapper {
    display: flex;           
    justify-content: center; 
    margin-top: 1rem;        
    margin-bottom: 1.5rem;   
}
img.hero-profile-image-main { /* Profile image in white hero */
    width: 256px;        
    height: 256px;       
    border-radius: 50%;  
    object-fit: cover;   /* Prevents skewing */
    border: 5px solid var(--background-color); 
    box-shadow: 0 8px 25px rgba(0,0,0,0.12); 
    display: block;      
}
@media screen and (max-width: 768px) { /* Responsive adjustments for white hero */
    .hero-main-title { font-size: 2rem; }
    .hero-tagline { font-size: 1rem; margin-bottom: 1.5rem; }
    img.hero-profile-image-main { 
        width: 180px; 
        height: 180px; 
    }
}

/* --- Section 2: Indigo Personal Description Hero --- */
.section.indigo-description-hero.is-primary { 
    /* background-color handled by global .section.is-primary rule */
    padding-top: 4rem;
    padding-bottom: 4rem;
}
.indigo-description-hero .hero-body { padding: 2rem 0; } 
.indigo-description-hero .title.is-2 { 
    margin-bottom: 2rem;
    font-weight: 600;
    /* color: var(--text-on-primary) !important; Handled by global .section.is-primary */
}
.indigo-description-hero .content p { 
    /* color: var(--text-on-primary) !important; Handled by global .section.is-primary */
    line-height: 1.8; 
    margin-bottom: 1.25rem;
}
.indigo-description-hero a.link-on-indigo-bg { 
    color: var(--link-on-primary); /* Brighter/distinct link color for on primary background */
    font-weight: 600; 
    text-decoration: none;
    border-bottom: 1px solid var(--link-on-primary); 
    padding-bottom: 1px;
    transition: color 0.2s ease, border-bottom-color 0.2s ease;
}
.indigo-description-hero a.link-on-indigo-bg:hover {
    color: var(--link-on-primary-hover);
    border-bottom-color: var(--link-on-primary-hover);
}

/* --- Section 3: Recent Publications --- */
.recent-publications-section {
    background-color: var(--background-color);
    padding-top: 4rem;
    padding-bottom: 4rem;
}
.recent-publications-section .section-title { /* This class wasn't in use in HTML, but style exists */
    color: var(--text-color);
    margin-bottom: 3rem;
}
.publication-card.portrait { 
    display: block;
    position: relative;
    border-radius: var(--card-border-radius);
    overflow: hidden;
    box-shadow: var(--card-shadow);
    transition: transform 0.3s ease-out, box-shadow 0.3s ease-out;
    background-color: #e0e0e0; /* Fallback background for image area */
}
.publication-card.portrait:hover {
    transform: translateY(-6px) scale(1.02);
    box-shadow: var(--card-shadow-hover);
}
.publication-image-figure { 
    position: relative;
    padding-top: 129.4%; /* Approx 8.5x11 aspect ratio. ADJUST TO YOUR IMAGES. */
    background-color: #f0f0f0; /* Fallback if image doesn't load */
}
.publication-image-figure img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover; 
    display: block;
    transition: transform 0.5s ease;
}
.publication-card.portrait:hover img {
    transform: scale(1.05); 
}
.publication-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--primary-indigo-overlay);
    color: var(--text-on-primary);
    padding: 1rem 1.25rem;
    opacity: 0; 
    transform: translateY(100%); 
    transition: opacity 0.3s ease-out, transform 0.3s ease-out; 
    text-align: left;
    min-height: auto; 
    display: flex;
    flex-direction: column; 
    justify-content: flex-end; 
}
.publication-card.portrait:hover .publication-overlay { 
    opacity: 1;
    transform: translateY(0);
}
.publication-overlay .title.is-5 {
    color: var(--text-on-primary) !important; 
    margin-bottom: 0.25rem; /* Space between title and journal */
    font-size: 0.9rem; 
    line-height: 1.25; 
    font-weight: 500; /* Was 500, could be 600 for more emphasis */
}
.publication-overlay .publication-journal { /* Added for styling journal if needed */
    font-size: 0.75rem;
    color: var(--link-on-primary); /* Dimmer than title */
    font-weight: 400;
}


/* Social links (used in footer and potentially elsewhere) */
.hero-social-links { margin-top: 2rem; } /* Used in footer context by original HTML */
.hero-social-links .button.is-ghost {
    background: transparent;
    border: none;
    color: var(--text-color-light); /* Default for non-primary backgrounds */
    font-size: 1.5rem;
    margin: 0 0.6rem;
    padding: 0.5rem;
    transition: color 0.2s ease, transform 0.2s ease; /* Added transition */
}
.hero-social-links .button.is-ghost:hover {
    color: var(--primary-indigo);
    transform: scale(1.1);
}
.hero-social-links .button.is-ghost .icon {
    font-size: inherit; /* Ensure icon takes button's font size */
}
/* Specific for footer if .is-primary */
.footer.is-primary .hero-social-links .button.is-ghost {
    color: white !important; /* Override default for primary background */
}
.footer.is-primary .hero-social-links .button.is-ghost:hover {
    color: var(--link-on-primary-hover) !important; /* Consistent hover on primary */
}


/* --- Generic Box Styling (CV, Contact content) --- */
.box.content-box {
    background-color: var(--background-color);
    border: 1px solid var(--border-color);
    border-radius: var(--box-content-border-radius); 
    box-shadow: var(--card-shadow);
    padding: 0; 
    font-family: var(--font-family-main);
    overflow: hidden; 
}
.cv-section-default { padding: 2rem; }
@media screen and (min-width: 769px) { .cv-section-default { padding: 2.5rem; } }

.cv-section-colored {
    background-color: var(--primary-indigo);
    color: var(--text-on-indigo); 
    padding: 2rem;
    border-radius: 0; /* No radius if it's a full band */
}
@media screen and (min-width: 769px) { .cv-section-colored { padding: 2.5rem; } }

.box.content-box > div:first-child {
    border-top-left-radius: var(--box-content-border-radius);
    border-top-right-radius: var(--box-content-border-radius);
}
.box.content-box > div:last-child {
    border-bottom-left-radius: var(--box-content-border-radius);
    border-bottom-right-radius: var(--box-content-border-radius);
}
.cv-section-colored .title,
.cv-section-colored .subtitle,
.cv-section-colored strong {
    color: var(--text-on-indigo) !important; 
}
.cv-section-colored .subtitle {
    color: var(--text-on-indigo-dim) !important;
}
.cv-section-colored address, .cv-section-colored p, .cv-section-colored li {
    color: var(--text-on-indigo);
}
.cv-section-colored a { 
    color: var(--link-on-indigo); 
    font-weight: 600; 
}
.cv-section-colored a:hover {
    color: var(--link-on-indigo-hover); 
    text-decoration: underline;
}
.cv-section-colored abbr { 
    border-bottom-color: var(--text-on-indigo-dim); 
    color: var(--text-on-indigo);
}
.section-title-indigo { 
    color: var(--primary-indigo) !important; 
}
.content-box .title.is-4 { 
    padding-bottom: 0.5em;
    margin-top: 1.5rem;
    margin-bottom: 1em;
    font-size: 1.5rem;
}
.content-box .cv-section-default .title.is-4 { 
    border-bottom: 1px solid var(--border-color-light);
}
.content-box div:first-child > .title.is-4:first-of-type { 
    margin-top: 0;
}
.content-box hr { 
    background-color: var(--border-color-light);
    height: 1px;
    margin: 1.5rem 0;
}
.cv-section-colored hr { 
    background-color: rgba(255, 255, 255, 0.2); 
}

/* --- Footer --- */
.footer { /* Default footer style (e.g. on CV page if not primary) */
    background-color: var(--background-color);
    border-top: none; /* Was: 1px solid var(--border-color-light); if you want a top border */
    color: var(--text-color-light);
    padding: 2rem 1.5rem; 
    margin-top: auto; /* Pushes footer to bottom if content is short */
    font-family: var(--font-family-main);
    text-align: center;
}
/* Footer paragraphs for CV/Contact - ensure specificity if used on pages without .is-primary footer */
.footer:not(.is-primary) .content p { 
    color: var(--text-color-light);
    font-size: 0.85rem; 
    line-height: 1.5;
    margin-bottom: 0.5rem; 
}
/* Footer paragraph for index.html - which has .is-primary on footer */
/* The .section.is-primary rules already cover text color for .footer.is-primary */
.footer.is-primary p { /* Ensures any direct <p> in primary footer is also styled */
     color: var(--text-on-primary) !important;
     font-size: 0.9rem; /* Example specific size for primary footer text */
     line-height: 1.6;
     margin-bottom: 0; /* From your .main-page-footer-credit p */
}

.footer a { /* Default link color in footer */
    color: var(--primary-indigo);
    font-weight: 500;
}
.footer a:hover {
    color: var(--primary-indigo-darker);
    text-decoration: underline;
}
/* Links in primary colored footer */
.footer.is-primary a {
    color: var(--link-on-primary) !important; /* From .indigo-description-hero a.link-on-indigo-bg like style */
}
.footer.is-primary a:hover {
    color: var(--link-on-primary-hover) !important;
    text-decoration: underline;
}

.bulma-credit {
    display: inline-flex;
    align-items: center;
    /* color handled by parent footer context a styles */
    font-weight: normal !important; /* Override bold from general a */
}
.bulma-credit:hover {
    /* text-decoration handled by parent footer context a:hover styles */
}
.bulma-logo-img {
    height: 1em;
    margin-left: 0.3em; 
    vertical-align: middle;
    position: relative;
    top: -0.05em; 
    filter: grayscale(100%) opacity(0.7); /* Default for light theme, non-primary footer */
    transition: filter 0.2s ease-in-out;
}
.bulma-credit:hover .bulma-logo-img {
    filter: none; /* Remove filter on hover for light theme, non-primary */
}
/* Bulma logo in dark theme OR on primary-colored footer (light theme) */
.dark-theme .footer .bulma-logo-img,
.footer.is-primary .bulma-logo-img {
    filter: brightness(0) invert(1) !important; /* Make it white */
}
.dark-theme .footer .bulma-credit:hover .bulma-logo-img,
.footer.is-primary .bulma-credit:hover .bulma-logo-img {
    filter: brightness(0) invert(1) !important; /* Keep it white on hover too */
}


/* Mobile Menu Helper Styles */
body.is-menu-open {
    overflow: hidden;
}
